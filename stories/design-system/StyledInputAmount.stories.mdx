import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import StyledInputAmount from '../../components/StyledInputAmount';

<Meta title="Design system/StyledInputAmount" component={StyledInputAmount} />

With currency set to `EUR`:

<Canvas>
  <Story name="With Currency EUR">
    {() => {
      const [value, setValue] = React.useState(0);
      const [isValid, setIsValid] = React.useState(true);
      return (
        <div>
          <StyledInputAmount
            currency="EUR"
            onChange={(value, e) => {
              setValue(value);
              setIsValid(e.target.checkValidity());
            }}
          />
          <p>
            Value: {new String(value)}
            <br />
            Is Valid: {isValid ? 'Yes' : 'No'}
          </p>
        </div>
      );
    }}
  </Story>
</Canvas>

With min amount to `$10`:

<Canvas>
  <Story name="With Min Amount">
    {() => {
      return <StyledInputAmount currency="USD" min="10" onChange={value => console.log(value)} />;
    }}
  </Story>
</Canvas>

### Controlled

<Canvas>
  <Story name="Controlled">
    {() => {
      const [value, setValue] = React.useState(0);
      const [isValid, setIsValid] = React.useState(true);
      return (
        <div>
          <StyledInputAmount
            currency="EUR"
            value={value}
            required
            onChange={(value, e) => {
              setValue(value);
              setIsValid(e.target.checkValidity());
            }}
          />
          <p>
            Value: {new String(value)}
            <br />
            Is Valid: {isValid ? 'Yes' : 'No'}
          </p>
        </div>
      );
    }}
  </Story>
</Canvas>

### With currency picker

<Canvas>
  <Story name="With currency picker">
    {() => {
      const [value, setValue] = React.useState(0);
      const [currency, setCurrency] = React.useState('USD');
      const [isValid, setIsValid] = React.useState(true);
      return (
        <div>
          <StyledInputAmount
            value={value}
            currency={currency}
            onCurrencyChange={setCurrency}
            hasCurrencyPicker
            maxWidth={250}
            onChange={(value, e) => {
              setValue(value);
              setIsValid(e.target.checkValidity());
            }}
          />
          <p>
            Value: {currency} {new String(value)}
            <br />
            Is Valid: {isValid ? 'Yes' : 'No'}
          </p>
        </div>
      );
    }}
  </Story>
</Canvas>
